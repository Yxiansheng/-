# Js 常见问题

## 实现模板字符串
   ```
   const templateFunc = (template, data) => {
       if (typeof template !== 'string') return ''
       return template.replace(/\{\{\s*(\w+)\s*\}\}/g, (match, key) => data[key])
   }
   
   console.log(templateFunc('', {}), '');
   console.log(templateFunc('{{a}} + 4', { a: 8 }), '8 + 4');
   console.log(templateFunc('2 + {{ a }}', { a: 7 }), '2 + 7');
   console.log(templateFunc('{{ a }} + {{ b }}', { a: 8, b: 7 }), '8 + 7');
   ```

## 实现Promise.all
   ```
   Promise.all = (quque) => new Promise((resolve, reject) => {
       const n = quque.length
       const result = new Array(n)    
       let overCount = 0
   
       quque.forEach((task, index) => {
           Promise.resolve(task).then((res) => {
               result[index] = res
               overCount += 1
               if (overCount === n) {
                   resolve(result)
               }
           }).catch(err => {
               reject(err)
           })
       })
   })   

   const task1 = new Promise((resolve, reject) => setTimeout(() => resolve(1), 100))
   const task2 = new Promise((resolve, reject) => setTimeout(() => resolve(2), 200))
   const task3 = new Promise((resolve, reject) => setTimeout(() => resolve(3), 300))
   const task4 = 3
   
   Promise.all([task1, task2, task3, task4]).then(res => {
       console.log('res: ', res);
   }).catch(err => {
       console.log('err', err)
   })
   
   Promise.resolve(() => 1).then(val => console.log(val));
   ```